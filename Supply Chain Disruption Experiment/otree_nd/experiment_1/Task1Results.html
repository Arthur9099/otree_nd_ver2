{{ block title }}Task 1 - Results{{ endblock }}

{{ block content }}
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
    }
    .otree-body {
        max-width: 1200px;
        margin: 0 auto;
    }
    .results-container {
        background-color: white;
        border: 1px solid #ddd;
        padding: 30px;
        margin: 20px 0;
    }
    h2 {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #333;
        text-align: center;
    }
    .summary-box {
        background-color: #f8f9fa;
        border: 2px solid #007bff;
        border-radius: 8px;
        padding: 25px;
        margin: 30px 0;
    }
    .summary-item {
        font-size: 16px;
        margin: 12px 0;
        line-height: 1.6;
    }
    .summary-item strong {
        color: #333;
    }
    .highlight {
        background-color: #fff3cd;
        padding: 3px 8px;
        border-radius: 3px;
        font-weight: bold;
    }
    .payoff-box {
        background-color: #d4edda;
        border: 3px solid #28a745;
        border-radius: 8px;
        padding: 20px;
        margin: 30px 0;
        text-align: center;
    }
    .payoff-amount {
        font-size: 36px;
        font-weight: bold;
        color: #28a745;
        margin: 15px 0;
    }
    .payment-breakdown {
        background-color: #e7f3ff;
        border: 2px solid #007bff;
        border-radius: 8px;
        padding: 20px;
        margin: 30px 0;
    }
    .payment-item {
        font-size: 16px;
        margin: 10px 0;
        padding: 5px 0;
    }
    .payment-total {
        font-size: 20px;
        font-weight: bold;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 2px solid #007bff;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 30px 0;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: center;
    }
    th {
        background-color: #007bff;
        color: white;
        font-weight: bold;
    }
    .selected-row {
        background-color: #fff3cd;
        font-weight: bold;
    }
    .choice-a {
        color: #007bff;
        font-weight: bold;
    }
    .choice-b {
        color: #dc3545;
        font-weight: bold;
    }
    .btn-primary {
        background-color: #007bff;
        border: none;
        padding: 12px 40px;
        font-size: 16px;
        cursor: pointer;
        color: white;
        border-radius: 4px;
        margin-top: 30px;
    }
    .btn-primary:hover {
        background-color: #0056b3;
    }
    .button-container {
        text-align: center;
        margin-top: 30px;
    }
    .explanation {
        background-color: #e7f3ff;
        border-left: 4px solid #007bff;
        padding: 15px;
        margin: 20px 0;
        line-height: 1.6;
    }
</style>

<div class="results-container">
    <h2>Task 1 Results</h2>
    
    <div class="explanation">
        <p><strong>How your payoff was determined:</strong></p>
        <p>The computer randomly selected <strong>Decision {{ selected_decision }}</strong> from your 10 decisions. Then, a random number between 1 and 10 was drawn: <strong>{{ random_number }}</strong>. Based on your choice and the random number, your payoff was calculated.</p>
    </div>

    <div class="summary-box">
        <div class="summary-item">
            <strong>Selected Decision:</strong> <span class="highlight">Decision {{ selected_decision }}</span>
        </div>
        <div class="summary-item">
            <strong>Your Choice:</strong> 
            <span class="{{ if selected_choice == 'A' }}choice-a{{ else }}choice-b{{ endif }}">
                Option {{ selected_choice }}
            </span>
        </div>
        <div class="summary-item">
            <strong>Random Number Drawn:</strong> <span class="highlight">{{ random_number }}</span>
        </div>
    </div>

    <div class="payoff-box">
        <h3 style="margin-top: 0;">Your Task 1 Payoff</h3>
        <div class="payoff-amount">{{ payoff }} francs</div>
        <p style="margin-bottom: 0;">≈ {{ task1_payment }} €</p>
    </div>

    <div class="payment-breakdown">
        <h3 style="margin-top: 0; color: #007bff;">Total Payment Summary</h3>
        <div class="payment-item">
            Show-up fee: <strong>3.00 €</strong>
        </div>
        <div class="payment-item">
            Performance payment (from main game): <strong>{{ "%.2f"|format(total_payment - 3 - task1_payment) }} €</strong>
        </div>
        <div class="payment-item">
            Task 1 payment: <strong>{{ task1_payment }} €</strong>
        </div>
        <div class="payment-total">
            Your Total Payment: <strong style="color: #28a745;">{{ total_payment }} €</strong>
        </div>
    </div>

    <h3 style="margin-top: 40px; margin-bottom: 15px;">Your Decisions Summary</h3>
    <table>
        <thead>
            <tr>
                <th>Decision</th>
                <th>Your Choice</th>
                <th>Option A</th>
                <th>Option B</th>
            </tr>
        </thead>
        <tbody>
            {{ for decision in decisions }}
            <tr {{ if decision.number == selected_decision }}class="selected-row"{{ endif }}>
                <td>{{ decision.number }}</td>
                <td class="{{ if decision.choice == 'A' }}choice-a{{ else }}choice-b{{ endif }}">
                    {{ decision.choice }}
                    {{ if decision.number == selected_decision }}★{{ endif }}
                </td>
                <td>
                    {{ decision.prob_a_high }}% chance of 4000<br>
                    {{ decision.prob_a_low }}% chance of 3200
                </td>
                <td>
                    {{ decision.prob_b_high }}% chance of 7700<br>
                    {{ decision.prob_b_low }}% chance of 200
                </td>
            </tr>
            {{ endfor }}
        </tbody>
    </table>

    <div class="button-container">
        {{ next_button label="Continue" class="btn btn-primary" }}
    </div>
</div>

{{ endblock }}